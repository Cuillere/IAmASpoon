var Weapon = require('game/weapon');

var Player = function Player (id, body) {
    this.id = id;
    this.body = body;
    this.health = 100;
    this.max_health = 100;
    this.weapon = new Weapon(this);
    this.name = '';
    this.team = '';
    this.flag = null;
};

Player.prototype = {
    tick: function(elapsedTime) {
        this.body.tick(elapsedTime);
        this.weapon.tick(elapsedTime);
        if(this.flag) {
            this.flag.body.x = this.body.x;
            this.flag.body.y = this.body.y - this.flag.body.height;
        }
    },

    takeFlag: function(flag) {
        this.flag = flag;
        this.flag.isTook = true;
        this.flag.body.isCollidable = false;
        this.flag.isAtSpawn = false;
    },

    dropFlag: function() {
        if(this.flag) {
            this.flag.body.isCollidable = true;
            this.flag.isTook = false;
            this.flag = null;
        }
    }
};

module.exports = Player;