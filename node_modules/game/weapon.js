var Body = require('physics/body');
var Force = require('physics/force');

var Weapon = function Weapon() {
    this.reloadDelay = 1000;
    this.m_currentReload = 0; //Need to be > reloadDelay to fire
};

Weapon.prototype = {
    tick: function(elapsedTime) {
        if(this.m_currentReload <= this.reloadDelay) {
            this.m_currentReload += elapsedTime;
        }
    },

    fire: function(game, src, dest) {
        if(this.m_currentReload >= this.reloadDelay) {
            this.m_currentReload = 0;
            var projBody = new Body(src.x, src.y, 10, 10, 0);
            var forceX = dest.x - src.x;
            var forceY = dest.y - src.y;
            projBody.addForce('trajectory', new Force(forceX, forceY));
            projBody.setGroup('projectile');
            game.addProjectile('bullet'+Date.now(),projBody);
        }
    }
};

module.exports = Weapon;